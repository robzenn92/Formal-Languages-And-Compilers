\chapter{Parsing}

As we saw in chapter 2, a grammar $\mathcal{G}$ can be defined like $S \rightarrow aSb | ab$.
\\ 
Given an input string such this: "aabb", we want to check if the input belongs to the language generated by $\mathcal{G}$.
There are two ways for do that:
\begin{itemize}
\item top-down tecnique
\item bottom-up tecnique
\end{itemize}
The point is that both tecniques produces a tree such that: \\ \\ 
\synttree	[S 	[a]
		    	[S 	[a]
		       		[b]
				]
				[b]
			]
\quad

\begin{algorithm}[H]
	\KwIn{string \textit{w}, a top-down parsing table for $\mathcal{G}$.}
	\KwOut{left-most derivation of \textit{w} if \textit{w} $\in \mathcal{L\set{G}}$, error otherwise.}
	Input buffer: w\$\;
	Stack: \$ + First symbol\;
	Let a be the first symbol of w\;
	Let X be the top of the stack\;
	\While{X $\neq$ \$}{
		\uIf{X=a}{
			pop X\;
			Let a be the next symbol of w\;
		}
		\uElseIf{X is a terminal}{ error()\; }
		\uElseIf{M[X,a] is error}{ error()\; }
		\ElseIf{M[X,a] = X $\rightarrow Y_1,...,Y_k$  }{
				output $Y_1,...,Y_k$\;
				pop X\;
				push $Y_k,...,Y_1$
		}
	}
	Let X be the top of the stack\;
	\vspace{0.2cm}
	\caption{Algorithm for non-recursive predictive parsing}
\end{algorithm}

\begin{table}[ht]
	\renewcommand*\arraystretch{1.5}
	\centering
	\begin{tabular}{|l | c | c | c | c | c | c|}
		\hline
		 & id & + & $\times$ & ( & ) & \$ \\ \hline
		E  	& E $\rightarrow$ TE' & & & E $\rightarrow$ TE' & & \\ \hline
		E' 	& & E' $\rightarrow$ +TE' & & & E' $\rightarrow \epsilon$ & E' $\rightarrow \epsilon$ \\ \hline
		T  	& T $\rightarrow$ FT' &	& & T $\rightarrow$ FT'	& & \\ \hline
		T' 	& & T' $\rightarrow \epsilon$ & T' $\rightarrow \times$FT & & T' $\rightarrow \epsilon$ & T' $\rightarrow \epsilon$ \\ \hline
		F' 	& F $\rightarrow$ id & & & F $\rightarrow$ (E) & & \\ \hline
	\end{tabular}
	\label{table:expressionstable} % is used to refer this table in the text
	\vspace{0.2cm}
	\caption{Predictive parsing table for expressions}
\end{table}

\begin{table}[ht]
	\renewcommand*\arraystretch{1.5}
	\centering
	\begin{tabular}{|l | r | l |}
		\hline
		Stack & Input & Output \\ \hline
		\$E & id+id$\times$id\$ & E $\rightarrow$ TE' \\ \hline
		\$E'T & id+id$\times$id\$ & T $\rightarrow$ FT' \\ \hline
		\$E'T'F & id+id$\times$id\$ & F $\rightarrow$ id \\ \hline
		\$E'T'id &  &  \\ \hline
		\$E'T' & +id$\times$id\$ & T' $\rightarrow \espilon$ \\ \hline
		\$E'T+ & +id$\times$id\$ & E' $\rightarrow$+TE' \\ \hline
	\end{tabular}
	\label{table:expressionsstacktable} % is used to refer this table in the text
	\vspace{0.2cm}
	\caption{Stack trace for expressions}
\end{table}

Reading the table below from the top to the bottom the output is displayed above.

\begin{center}
\synttree	[E 	
				[T 	
					[F
						[id]
					]
		       		[T'
		       			[$\epsilon$]
		       		]
				]
				[E'
					[+]
					[T
						[F
							[id]
						]
						[T'
							[$\times$]
							[F
								[id]
							]
							[T'
								[$\epsilon$]
							]
						]
					]
					[E'
						[$\epsilon$]
					]
				]
			]
\quad
\end{center}

Given grammar:
&S $\rightarrow$ CD\\
&C $\rightarrow$ aCa | bCb | $\epsilon$\\
&D $\rightarrow \epsilon$\\
\begin{table}[ht]
	\renewcommand*\arraystretch{1.5}
	\centering
	\begin{tabular}{|l | l | l |}
		\hline
		Symbol & First & Follow \\ \hline
		E 	& ( id & \$ ) \\ \hline
		E' 	& + $\epsilon$ & \$ )  \\ \hline
		T 	& ( id & \$ ) + \\ \hline
		T' 	& $\times$ $\epsilon$ & \$ ) + \\ \hline
		F 	& ( id & \$ ) + $\times$ \\ \hline
	\end{tabular}
	\label{table:firstfollowexprtable} % is used to refer this table in the text
	\vspace{0.2cm}
	\caption{First and Follow for expressions}
\end{table}

\begin{algorithm}[H]
	\KwIn{Grammar $\mathcal{G}$.}
	\KwOut{Predictive top-down parsing table for $\mathcal{G}$ if $\mathcal{G}$ can be parsed top-down predictively.}
	\ForEach{A $\rightarrow \alpha \in \mathcal{P}$}{
		\ForEach{b $\in$ First($\alpha$)}{
			add A $\rightarrow \alpha$ to M[A,b]\;
		}
		\If{$\epsilon \in$ First($\alpha$)}{
			add A $\rightarrow \alpha$ to M[A,x] where x $\in$ Follow(A)\;
		}
	}
	Set to error() all the empty entries\;
	\vspace{0.2cm}
	\caption{Algorithm that makes a predictive top-down parsing table}
\end{algorithm}
\vspace{0.2cm}
If there are no multiple defined entries in the predictive top-down parsing table then the given grammar is LL(1).
\vspace{0.2cm}
Example: E $\rightarrow$ E + E | E $\times$ E | id \\

\begin{table}
\renewcommand*\arraystretch{1.5}
\centering
\begin{tabular}{|l|l|l|}
\hline
 & First & Follow \\ \hline
 E & id & \$ + $\times$ \\ \hline
\end{tabular}
\end{table}

\begin{table}[ht]
	\renewcommand*\arraystretch{1.5}
	\centering
	\begin{tabular}{|l | c | l | l | l |}
		\hline
		 & id & + & $\times$ & \$ \\ \hline
		E & \begin{tabular}{l} E $\rightarrow$ E + E \\ E $\rightarrow$ E $\times$ E \\ E $\rightarrow$ id \end{tabular} & & & \\ \hline
	\end{tabular}
	\label{table:parsingtableexpressions} % is used to refer this table in the text
	\vspace{0.2cm}
	\caption{Predictive parsing table for expressions}
\end{table}

